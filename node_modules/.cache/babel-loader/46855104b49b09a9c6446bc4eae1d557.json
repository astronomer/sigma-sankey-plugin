{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Entity } from \"./Entity\";\nimport { StyleRule } from \"./Utils\";\nimport { MultiDisposer, CounterDisposer } from \"../../core/util/Disposer\";\nimport * as $utils from \"./Utils\";\n/**\r\n * @ignore\r\n */\n\nvar rules;\n/**\r\n * @ignore\r\n */\n\nfunction modalCSS(element, root, _prefix) {\n  var ic = root.interfaceColors;\n  var active = ic.get(\"secondaryButton\").toCSS(); //const altbg = ic.get(\"alternativeBackground\")!.toCSS();\n\n  if (!rules) {\n    var disposer_1 = new MultiDisposer([new StyleRule(element, \".am5-modal\", {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"position\": \"absolute\",\n      \"z-index\": \"100000\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }), new StyleRule(element, \".am5-modal-curtain\", {\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"position\": \"absolute\",\n      \"background\": ic.get(\"background\").toCSS(0.5),\n      \"z-index\": \"100\"\n    }), new StyleRule(element, \".am5-modal-wrapper\", {\n      \"top\": \"0\",\n      \"left\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"position\": \"absolute\",\n      \"text-align\": \"center\",\n      \"white-space\": \"nowrap\",\n      \"background\": ic.get(\"background\").toCSS(0.5),\n      \"z-index\": \"101\"\n    }), new StyleRule(element, \".am5-modal-wrapper:before\", {\n      \"content\": \"''\",\n      \"display\": \"inline-block\",\n      \"height\": \"100%\",\n      \"vertical-align\": \"middle\",\n      \"margin-right\": \"-0.25em\"\n    }), new StyleRule(element, \".am5-modal-content\", {\n      \"display\": \"inline-block\",\n      \"padding\": \"1.2em\",\n      \"vertical-align\": \"middle\",\n      \"text-align\": \"left\",\n      \"white-space\": \"normal\",\n      \"background\": ic.get(\"background\").toCSS(),\n      //\"border\": \"1px solid \" + ic.get(\"alternativeBackground\")!.toCSS(),\n      \"border-radius\": \"4px\",\n      \"-webkit-box-shadow\": \"0px 0px 36px 0px rgba(0,0,0,0.45)\",\n      \"box-shadow\": \"0px 0px 36px 0px rgba(0,0,0,0.45)\"\n    }), new StyleRule(element, \".am5-modal-content h1\", {\n      \"font-size\": \"1em\",\n      \"margin\": \"0 0 0.5em 0\"\n    }), new StyleRule(element, \".am5-modal-table\", {\n      \"display\": \"table\",\n      \"margin\": \"1em 0\"\n    }), new StyleRule(element, \".am5-modal-table-row\", {\n      \"display\": \"table-row\"\n    }), new StyleRule(element, \".am5-modal-table-heading\", {\n      \"display\": \"table-heading\",\n      \"padding\": \"3px 10px 3px 0\"\n    }), new StyleRule(element, \".am5-modal-table-cell\", {\n      \"display\": \"table-cell\",\n      \"padding\": \"3px 0 3px 0\"\n    }), new StyleRule(element, \".am5-modal-table-cell > *\", {\n      \"vertical-align\": \"middle\"\n    }), new StyleRule(element, \".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select\", {\n      \"border\": \"1px solid \" + active,\n      \"border-radius\": \"4px\",\n      \"padding\": \"3px 5px\",\n      \"margin\": \"2px\"\n    }), new StyleRule(element, \".am5-modal-input-narrow\", {\n      \"width\": \"50px\"\n    }), new StyleRule(element, \".am5-modal-button\", {\n      \"font-weight\": \"400\",\n      \"color\": ic.get(\"secondaryButtonText\").toCSS(),\n      \"line-height\": \"1.5\",\n      \"text-align\": \"center\",\n      \"text-decoration\": \"none\",\n      \"vertical-align\": \"middle\",\n      \"cursor\": \"pointer\",\n      \"padding\": \"0.2em 0.8em\",\n      \"font-size\": \"1em\",\n      \"border-radius\": \"0.25em\",\n      \"margin\": \"0 0.25em 0 0\",\n      \"border\": \"1px solid \" + ic.get(\"secondaryButtonStroke\").toCSS(),\n      \"background\": ic.get(\"secondaryButton\").toCSS()\n    }), new StyleRule(element, \".am5-modal-button:hover\", {\n      \"background\": ic.get(\"secondaryButtonHover\").toCSS()\n    }), new StyleRule(element, \".am5-modal-button.am5-modal-primary\", {\n      \"color\": ic.get(\"primaryButtonText\").toCSS(),\n      \"border\": \"1px solid \" + ic.get(\"primaryButtonStroke\").toCSS(),\n      \"background\": ic.get(\"primaryButton\").toCSS()\n    }), new StyleRule(element, \".am5-modal-button.am5-modal-primary:hover\", {\n      \"background\": ic.get(\"primaryButtonHover\").toCSS()\n    })]);\n    rules = new CounterDisposer(function () {\n      rules = undefined;\n      disposer_1.dispose();\n    });\n  }\n\n  return rules.increment();\n}\n/**\r\n * Used to display a modal dialog with HTML content.\r\n */\n\n\nvar Modal =\n/** @class */\nfunction (_super) {\n  __extends(Modal, _super);\n\n  function Modal() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } //protected _currentPass: number = 0;\n\n\n  Object.defineProperty(Modal.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this; // Applying themes because this will not have parents\n\n\n      _super.prototype._afterNewApplyThemes.call(this); // Load CSS\n\n\n      modalCSS($utils.getShadowRoot(this._root.dom), this._root); // Create elements\n\n      var container = document.createElement(\"div\");\n      container.className = \"am5-modal\";\n      container.style.display = \"none\";\n\n      this.root._inner.appendChild(container);\n\n      this.setPrivate(\"container\", container);\n      var curtain = document.createElement(\"div\");\n      curtain.className = \"am5-modal-curtain\";\n      container.appendChild(curtain);\n      this.setPrivate(\"curtain\", curtain);\n      $utils.addEventListener(curtain, \"click\", function () {\n        _this.cancel();\n      });\n      var wrapper = document.createElement(\"div\");\n      wrapper.className = \"am5-modal-wrapper\";\n      container.appendChild(wrapper);\n      this.setPrivate(\"wrapper\", wrapper);\n      var content = document.createElement(\"div\");\n      content.className = \"am5-modal-content\";\n      wrapper.appendChild(content);\n      this.setPrivate(\"content\", content);\n      var html = this.get(\"content\");\n\n      if (html) {\n        content.innerHTML = html;\n      } // Close on ESC\n\n\n      if ($utils.supports(\"keyboardevents\")) {\n        this._disposers.push($utils.addEventListener(document, \"keydown\", function (ev) {\n          if (_this.isOpen() && ev.keyCode == 27) {\n            _this.cancel();\n          }\n        }));\n      }\n    }\n  });\n  Object.defineProperty(Modal.prototype, \"_beforeChanged\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._beforeChanged.call(this);\n\n      if (this.isDirty(\"content\")) {\n        this.getPrivate(\"content\").innerHTML = this.get(\"content\", \"\");\n      }\n    }\n  });\n  /**\r\n   * Returns `true` if modal is currently open.\r\n   *\r\n   * @return  Modal open?\r\n   */\n\n  Object.defineProperty(Modal.prototype, \"isOpen\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.getPrivate(\"container\").style.display != \"none\";\n    }\n  });\n  /**\r\n   * Opens modal.\r\n   */\n\n  Object.defineProperty(Modal.prototype, \"open\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.getPrivate(\"container\").style.display = \"block\";\n      this.events.dispatch(\"opened\", {\n        type: \"opened\",\n        target: this\n      });\n    }\n  });\n  /**\r\n   * Closes modal.\r\n   */\n\n  Object.defineProperty(Modal.prototype, \"close\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.getPrivate(\"container\").style.display = \"none\";\n      this.events.dispatch(\"closed\", {\n        type: \"closed\",\n        target: this\n      });\n    }\n  });\n  /**\r\n   * Closes modal and invokes `cancelled` event.\r\n   */\n\n  Object.defineProperty(Modal.prototype, \"cancel\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.getPrivate(\"container\").style.display = \"none\";\n      this.events.dispatch(\"cancelled\", {\n        type: \"cancelled\",\n        target: this\n      });\n    }\n  });\n  /**\r\n   * Disposes modal.\r\n   */\n\n  Object.defineProperty(Modal.prototype, \"dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype.dispose.call(this);\n\n      this.root.dom.removeChild(this.getPrivate(\"container\"));\n    }\n  });\n  Object.defineProperty(Modal, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"Modal\"\n  });\n  Object.defineProperty(Modal, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: Entity.classNames.concat([Modal.className])\n  });\n  return Modal;\n}(Entity);\n\nexport { Modal };","map":{"version":3,"sources":["../../../../../src/.internal/core/util/Modal.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Root } from \"../Root\"\n\nimport { Entity, IEntitySettings, IEntityPrivate, IEntityEvents } from \"./Entity\";\nimport { StyleRule } from \"./Utils\"\nimport { MultiDisposer, IDisposer, CounterDisposer } from \"../../core/util/Disposer\";\n\nimport * as $utils from \"./Utils\"\n\n\n/**\n * @ignore\n */\nlet rules: CounterDisposer | undefined;\n\n/**\n * @ignore\n */\nfunction modalCSS(element: ShadowRoot | null, root: Root, _prefix?: string): IDisposer {\n\tconst ic = root.interfaceColors;\n\tconst active = ic.get(\"secondaryButton\")!.toCSS();\n\t//const altbg = ic.get(\"alternativeBackground\")!.toCSS();\n\n\tif (!rules) {\n\t\tconst disposer = new MultiDisposer([\n\n\t\t\tnew StyleRule(element, \".am5-modal\", {\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"z-index\": \"100000\",\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-curtain\", {\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\",\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(0.5),\n\t\t\t\t\"z-index\": \"100\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-wrapper\", {\n\t\t\t\t\"top\": \"0\",\n\t\t\t\t\"left\": \"0\",\n\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"position\": \"absolute\",\n\t\t\t\t\"text-align\": \"center\",\n\t\t\t\t\"white-space\": \"nowrap\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(0.5),\n\t\t\t\t\"z-index\": \"101\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-wrapper:before\", {\n\t\t\t\t\"content\": \"''\",\n\t\t\t\t\"display\": \"inline-block\",\n\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"margin-right\": \"-0.25em\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content\", {\n\t\t\t\t\"display\": \"inline-block\",\n\t\t\t\t\"padding\": \"1.2em\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"text-align\": \"left\",\n\t\t\t\t\"white-space\": \"normal\",\n\t\t\t\t\"background\": ic.get(\"background\")!.toCSS(),\n\t\t\t\t//\"border\": \"1px solid \" + ic.get(\"alternativeBackground\")!.toCSS(),\n\t\t\t\t\"border-radius\": \"4px\",\n\t\t\t\t\"-webkit-box-shadow\": \"0px 0px 36px 0px rgba(0,0,0,0.45)\",\n\t\t\t\t\"box-shadow\": \"0px 0px 36px 0px rgba(0,0,0,0.45)\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content h1\", {\n\t\t\t\t\"font-size\": \"1em\",\n\t\t\t\t\"margin\": \"0 0 0.5em 0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table\", {\n\t\t\t\t\"display\": \"table\",\n\t\t\t\t\"margin\": \"1em 0\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-row\", {\n\t\t\t\t\"display\": \"table-row\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-heading\", {\n\t\t\t\t\"display\": \"table-heading\",\n\t\t\t\t\"padding\": \"3px 10px 3px 0\",\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-cell\", {\n\t\t\t\t\"display\": \"table-cell\",\n\t\t\t\t\"padding\": \"3px 0 3px 0\",\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-table-cell > *\", {\n\t\t\t\t\"vertical-align\": \"middle\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-content input[type=text], .am5-modal-content input[type=number], .am5-modal-content select\", {\n\t\t\t\t\"border\": \"1px solid \" + active,\n\t\t\t\t\"border-radius\": \"4px\",\n\t\t\t\t\"padding\": \"3px 5px\",\n\t\t\t\t\"margin\": \"2px\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-input-narrow\", {\n\t\t\t\t\"width\": \"50px\"\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button\", {\n\t\t\t\t\"font-weight\": \"400\",\n\t\t\t\t\"color\": ic.get(\"secondaryButtonText\")!.toCSS(),\n\t\t\t\t\"line-height\": \"1.5\",\n\t\t\t\t\"text-align\": \"center\",\n\t\t\t\t\"text-decoration\": \"none\",\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"cursor\": \"pointer\",\n\t\t\t\t\"padding\": \"0.2em 0.8em\",\n\t\t\t\t\"font-size\": \"1em\",\n\t\t\t\t\"border-radius\": \"0.25em\",\n\t\t\t\t\"margin\": \"0 0.25em 0 0\",\n\t\t\t\t\"border\": \"1px solid \" + ic.get(\"secondaryButtonStroke\")!.toCSS(),\n\t\t\t\t\"background\": ic.get(\"secondaryButton\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button:hover\", {\n\t\t\t\t\"background\": ic.get(\"secondaryButtonHover\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button.am5-modal-primary\", {\n\t\t\t\t\"color\": ic.get(\"primaryButtonText\")!.toCSS(),\n\t\t\t\t\"border\": \"1px solid \" + ic.get(\"primaryButtonStroke\")!.toCSS(),\n\t\t\t\t\"background\": ic.get(\"primaryButton\")!.toCSS()\n\t\t\t}),\n\n\t\t\tnew StyleRule(element, \".am5-modal-button.am5-modal-primary:hover\", {\n\t\t\t\t\"background\": ic.get(\"primaryButtonHover\")!.toCSS()\n\t\t\t}),\n\n\t\t]);\n\n\t\trules = new CounterDisposer(() => {\n\t\t\trules = undefined;\n\t\t\tdisposer.dispose();\n\t\t});\n\t}\n\n\treturn rules.increment();\n}\n\n\nexport interface IModalSettings extends IEntitySettings {\n\tcontent?: string;\n}\n\nexport interface IModalPrivate extends IEntityPrivate {\n\tcontainer: HTMLDivElement;\n\tcurtain: HTMLDivElement;\n\twrapper: HTMLDivElement;\n\tcontent: HTMLDivElement;\n}\n\nexport interface IModalEvents extends IEntityEvents {\n\t\"opened\": {}\n\t\"closed\": {}\n\t\"cancelled\": {}\n}\n\n/**\n * Used to display a modal dialog with HTML content.\n */\nexport class Modal extends Entity {\n\tpublic static className: string = \"Modal\";\n\tpublic static classNames: Array<string> = Entity.classNames.concat([Modal.className]);\n\n\tdeclare public _settings: IModalSettings;\n\tdeclare public _privateSettings: IModalPrivate;\n\tdeclare public _events: IModalEvents;\n\n\t//protected _currentPass: number = 0;\n\n\tprotected _afterNew() {\n\t\t// Applying themes because this will not have parents\n\t\tsuper._afterNewApplyThemes();\n\n\t\t// Load CSS\n\t\tmodalCSS($utils.getShadowRoot(this._root.dom), this._root);\n\n\t\t// Create elements\n\t\tconst container = document.createElement(\"div\");\n\t\tcontainer.className = \"am5-modal\";\n\t\tcontainer.style.display = \"none\";\n\t\tthis.root._inner.appendChild(container);\n\t\tthis.setPrivate(\"container\", container);\n\n\t\tconst curtain = document.createElement(\"div\");\n\t\tcurtain.className = \"am5-modal-curtain\";\n\t\tcontainer.appendChild(curtain);\n\t\tthis.setPrivate(\"curtain\", curtain);\n\n\t\t$utils.addEventListener(curtain, \"click\", () => {\n\t\t\tthis.cancel();\n\t\t});\n\n\t\tconst wrapper = document.createElement(\"div\");\n\t\twrapper.className = \"am5-modal-wrapper\";\n\t\tcontainer.appendChild(wrapper);\n\t\tthis.setPrivate(\"wrapper\", wrapper);\n\n\t\tconst content = document.createElement(\"div\");\n\t\tcontent.className = \"am5-modal-content\";\n\t\twrapper.appendChild(content);\n\t\tthis.setPrivate(\"content\", content);\n\n\t\tconst html = this.get(\"content\");\n\t\tif (html) {\n\t\t\tcontent.innerHTML = html;\n\t\t}\n\n\t\t// Close on ESC\n\t\tif ($utils.supports(\"keyboardevents\")) {\n\t\t\tthis._disposers.push($utils.addEventListener(document, \"keydown\", (ev: KeyboardEvent) => {\n\t\t\t\tif (this.isOpen() && ev.keyCode == 27) {\n\t\t\t\t\tthis.cancel();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"content\")) {\n\t\t\tthis.getPrivate(\"content\").innerHTML = this.get(\"content\", \"\");\n\t\t}\n\t}\n\n\t/**\n\t * Returns `true` if modal is currently open.\n\t * \n\t * @return  Modal open?\n\t */\n\tpublic isOpen(): boolean {\n\t\treturn this.getPrivate(\"container\").style.display != \"none\";\n\t}\n\n\t/**\n\t * Opens modal.\n\t */\n\tpublic open(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"block\";\n\t\tthis.events.dispatch(\"opened\", {\n\t\t\ttype: \"opened\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Closes modal.\n\t */\n\tpublic close(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"none\";\n\t\tthis.events.dispatch(\"closed\", {\n\t\t\ttype: \"closed\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Closes modal and invokes `cancelled` event.\n\t */\n\tpublic cancel(): void {\n\t\tthis.getPrivate(\"container\").style.display = \"none\";\n\t\tthis.events.dispatch(\"cancelled\", {\n\t\t\ttype: \"cancelled\",\n\t\t\ttarget: this\n\t\t});\n\t}\n\n\t/**\n\t * Disposes modal.\n\t */\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\tthis.root.dom.removeChild(this.getPrivate(\"container\"));\n\t}\n\n}"],"sourceRoot":""},"metadata":{},"sourceType":"module"}